(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[308],{7659:(e,t,n)=>{Promise.resolve().then(n.bind(n,1106))},5601:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return m},getImageProps:function(){return r}});let a=n(9920),o=n(497),i=n(8173),s=a._(n(1241));function r(e){let{props:t}=(0,o.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}}let m=i.Image},1106:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var a=n(7437),o=n(5601),i=n.n(o),s=n(2265),r=n(1169),m=n(6983),l=n.n(m);let c=function(e){let{comment:t}=e;return(0,a.jsxs)("div",{className:l().commentContainer,children:[(0,a.jsx)("h4",{className:l().userName,children:t.user}),(0,a.jsx)("p",{className:l().commentText,children:t.comment}),(0,a.jsx)("span",{className:l().commentTime,children:t.time.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})};async function u(e){let t=await fetch("".concat("http://localhost:3000","/api/blogs/").concat(e),{cache:"no-store"});return t.ok?t.json():null}function d(e){let{params:t}=e,[n,o]=(0,s.useState)(null),[m,l]=(0,s.useState)([]),[d,h]=(0,s.useState)(""),[f,g]=(0,s.useState)(""),[p,x]=(0,s.useState)(!1),[j,_]=(0,s.useState)(null);(0,s.useEffect)(()=>{!async function(){let e=await t;if(_(e.slug),!e.slug){(0,r.notFound)();return}let n=await u(e.slug);if(!n){(0,r.notFound)();return}o(n),l(n.comments||[])}()},[t]);let S=async e=>{if(e.preventDefault(),!d||!f)return;x(!0);let t={user:d,comment:f,time:new Date().toISOString()};j&&(await fetch("".concat("http://localhost:3000","/api/blogs/").concat(j,"/comments"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),l(e=>[...e,t]),h(""),g("")),x(!1)};return n?(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{children:n.title}),(0,a.jsx)("p",{children:n.description}),n.image&&(0,a.jsx)(i(),{src:n.image,alt:n.title,width:500,height:300}),(0,a.jsx)("p",{children:new Date(n.date).toLocaleDateString()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"Comments"}),m.map((e,t)=>(0,a.jsx)(c,{comment:{user:e.user,comment:e.comment,time:new Date(e.time)}},t)),(0,a.jsxs)("form",{onSubmit:S,children:[(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"text",placeholder:"Your name",value:d,onChange:e=>h(e.target.value)})}),(0,a.jsx)("div",{children:(0,a.jsx)("textarea",{placeholder:"Your comment",value:f,onChange:e=>g(e.target.value)})}),(0,a.jsx)("button",{type:"submit",disabled:p,children:p?"Submitting...":"Add Comment"})]})]})]}):null}},6983:e=>{e.exports={commentContainer:"Comment_commentContainer__aFOsY",userName:"Comment_userName__AsPLU",commentText:"Comment_commentText__1gatf",commentTime:"Comment_commentTime__2fm75"}}},e=>{var t=t=>e(e.s=t);e.O(0,[362,173,130,215,744],()=>t(7659)),_N_E=e.O()}]);